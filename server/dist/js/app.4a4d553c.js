(function(){var t={9283:function(t,e,a){"use strict";var i=a(7195),s=a(4359),o=a(7244);a(7024);i["default"].use(s.XG7),i["default"].use(o.X);var n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},r=[],l={name:"App",components:{}},c=l,d=a(1001),u=(0,d.Z)(c,n,r,!1,null,null,null),p=u.exports,h=a(7127),v=a(8772),b=a.n(v),f=a(2241),g=function(){var t=this,e=t._self._c;return e("HomeComponent")},w=[],m=function(){var t=this,e=t._self._c;return e("div",[e("b-container",[e("b-row",[e("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.isMobile,expression:"!isMobile"}]},[e("b-card",[e("b-card-body",[e("QrCodeComponent",{attrs:{id:"qrCode",text:t.shareUrl,name:"qrCode"}})],1),e("b-card-text",{staticStyle:{"text-align":"left"}},[t._v(" 扫码或访问 "),e("span",{staticClass:"user-select-all"},[t._v(t._s(t.shareUrl))])])],1)],1),e("b-col",[e("b-card",{staticStyle:{"text-align":"left"}},[e("b-card",{attrs:{"text-variant":"white","img-height":"100px",overlay:"","img-src":"/bg.jpg"}},[e("b-card-text",[e("span",{staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(t.dev.show)+" ")]),e("b-badge",{staticStyle:{float:"right"},attrs:{variant:"light"}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.ws,expression:"ws"}],staticStyle:{color:"cadetblue"}},[e("b-icon",{attrs:{variant:"success",icon:"wifi","font-scale":"1.5"}}),t._v(" 已连接 ")],1),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.ws,expression:"!ws"}],staticStyle:{color:"grey"}},[e("b-icon",{attrs:{icon:"wifi-off","font-scale":"1.5"}}),t._v(" 中断 ")],1)])],1)],1),e("b-badge",{staticStyle:{color:"dimgrey"},attrs:{variant:"light"}},[t._v("选择设备发起同步")]),e("a",{attrs:{href:"javascript:void(0)"},on:{click:t.clearSyncCache}},[e("b-badge",{attrs:{pill:"",variant:"danger"}},[t._v("清理缓存")])],1),e("b-list-group",{staticStyle:{"text-align":"left"}},t._l(t.devs,(function(a){return e("b-list-group-item",{key:a.devId,staticClass:"d-flex align-items-center",attrs:{disabled:!a.online,active:a.devId===t.choiceDev,href:"javascript:void(0)",id:a.devId},on:{click:function(e){return t.clickChoiceDev(a)}}},[e("b-avatar",{staticClass:"mr-2",staticStyle:{color:"aquamarine"},attrs:{size:"sm",variant:"secondary",icon:t.genDevIcon(a.cate)}}),e("span",{staticClass:"mr-auto"},[t._v(t._s(a.show))]),e("b-icon",{directives:[{name:"show",rawName:"v-show",value:a.online,expression:"de.online"}],staticStyle:{color:"#9be7ac"},attrs:{icon:"wifi"}}),e("b-icon",{directives:[{name:"show",rawName:"v-show",value:!a.online,expression:"!de.online"}],staticStyle:{color:"#4e555b"},attrs:{icon:"wifi-off"}})],1)})),1)],1)],1)],1),e("b-row",{staticClass:"sync-input-row",staticStyle:{"text-align":"left"}},[e("b-col",[e("b-badge",{attrs:{pill:"",variant:"warning"}},[t._v("同步文本")]),e("b-form-textarea",{directives:[{name:"show",rawName:"v-show",value:t.choiceDev,expression:"choiceDev"}],attrs:{placeholder:"输入文本...",rows:"3","max-rows":"6"},model:{value:t.syncText,callback:function(e){t.syncText=e},expression:"syncText"}})],1)],1),e("b-row",{staticClass:"sync-show-row",staticStyle:{"text-align":"left"}},[e("b-col",t._l(t.dev.syncText,(function(a,i){return e("b-card",{key:i,staticStyle:{"margin-top":"8px"}},[e("b-card-sub-title",[e("b-icon",{attrs:{variant:"primary",icon:"messenger"}}),t._v("   "),e("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(a.fromShow))]),e("span",{staticStyle:{float:"right","font-size":"xx-small"}},[e("b-badge",{attrs:{href:"javascript:void(0)",variant:"light"},on:{click:function(e){return t.showHistoryTextModalEvent(a)}}},[e("b-icon",{attrs:{variant:"info","font-scale":"2",icon:"clock-history"}})],1),t._v("   "),e("b-badge",{attrs:{href:"javascript:void(0)",id:"C"+i,"data-clipboard-text":a.syncDetails[a.syncDetails.length-1].content,variant:"light"},on:{click:function(e){return t.copyText("C"+i)}}},[e("b-icon",{attrs:{variant:"info","font-scale":"2",icon:"clipboard"}})],1),t._v(" "+t._s(t.formatTime(a.syncTime)))],1)],1),e("b-card-text",{staticStyle:{"margin-top":"8px"}},[e("div",{staticStyle:{"white-space":"pre-wrap"}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.enableTranslate,expression:"!enableTranslate"}]},[t._v(" "+t._s(a.syncDetails[a.syncDetails.length-1].content)+" ")])]),e("a",{directives:[{name:"show",rawName:"v-show",value:t.enableTranslate,expression:"enableTranslate"}],staticClass:"user-select-all",staticStyle:{color:"#1d2124","text-decoration":"none"},attrs:{id:"popover"+i,href:"javascript:void(0)"},on:{click:t.clickTranslate}},[t._v(t._s(a.syncDetails[a.syncDetails.length-1].content))]),e("div",[t.enableTranslate?e("b-popover",{attrs:{target:"popover"+i,placement:"top",triggers:"focus"},scopedSlots:t._u([{key:"title",fn:function(){return[e("b-icon",{attrs:{icon:"translate"}}),e("span",{staticStyle:{"font-size":"small"}},[t._v(" "+t._s(t.transInfo.from)+" "),e("b-icon",{attrs:{icon:"arrow-right"}}),t._v(" "+t._s(t.transInfo.to)+" ")],1)]},proxy:!0}],null,!0)},[t._v(" "+t._s(t.transInfo.trans_result?t.transInfo.trans_result[0].dst:"loading...")+" ")]):t._e()],1)])],1)})),1)],1),e("b-row",{staticClass:"sync-input-row",staticStyle:{"text-align":"left"}},[e("b-col",[e("b-badge",{attrs:{pill:"",variant:"warning"}},[t._v("同步文件")]),e("uploader",{directives:[{name:"show",rawName:"v-show",value:t.choiceDev,expression:"choiceDev"}],staticClass:"sync-uploader",attrs:{options:t.uploadOptions},on:{"file-success":t.onFileUploadSuccess}},[e("uploader-unsupport"),e("uploader-drop",[e("p",[t._v("拖拽文件上传或")]),e("uploader-btn",{staticStyle:{"margin-left":"10px"}},[e("b-icon",{attrs:{variant:"primary",icon:"file-earmark"}}),t._v(" 文件 ")],1),e("uploader-btn",{staticStyle:{"margin-left":"10px"},attrs:{attrs:t.uploadAttrs}},[e("b-icon",{attrs:{variant:"primary",icon:"card-image"}}),t._v(" 图片 ")],1),e("uploader-btn",{staticStyle:{"margin-left":"10px"},attrs:{directory:!0}},[e("b-icon",{attrs:{variant:"primary",icon:"folder"}}),t._v(" 文件夹 ")],1)],1),e("uploader-list")],1)],1)],1),e("b-row",{staticClass:"sync-show-row",staticStyle:{"text-align":"left"}},[e("b-col",{staticStyle:{"margin-bottom":"12px"}},t._l(t.dev.syncFile,(function(a,i){return e("b-card",{key:i},[e("b-card-sub-title",[e("b-icon",{attrs:{variant:"primary",icon:"messenger"}}),t._v("   "),e("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(a.fromShow))]),e("span",{staticStyle:{float:"right","font-size":"xx-small"}},[t._v(t._s(t.formatTime(a.syncTime)))])],1),e("b-card-text",[e("b-list-group",{staticStyle:{"margin-top":"10px"}},t._l(a.syncDetails,(function(a,i){return e("b-list-group-item",{key:i},[e("div",{staticStyle:{float:"left",width:"5%","margin-right":"5px"}},[e("b-icon",{attrs:{icon:"image-fill"}})],1),e("div",{staticClass:"file-show-link",staticStyle:{float:"left",width:"50%"}},[t.dev.isMaster?e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.clickDownloadEvent(t.genUrl("/"+a.fileHash))}}},[t._v(" "+t._s(a.show)+" ")]):e("a",{attrs:{download:"",href:t.genUrl("/"+a.fileHash)}},[t._v(" "+t._s(a.show)+" ")])]),e("div",{staticStyle:{float:"left",width:"10%"}},[e("b-badge",{attrs:{variant:"info",pill:""}},[t._v(t._s(a.fileSize))])],1),e("div",{staticStyle:{float:"right","text-align":"right",width:"10%"}},[e("b-badge",{attrs:{pill:"",href:"#",variant:"primary"},on:{click:function(e){return t.clickPreview(a.fileHash,a.fileExt,a.show)}}},[t._v(" 查看 ")])],1)])})),1)],1)],1)})),1)],1),e("b-modal",{attrs:{title:"文本同步历史记录",scrollable:"",size:"xl","hide-footer":""},model:{value:t.showHistoryTextModal,callback:function(e){t.showHistoryTextModal=e},expression:"showHistoryTextModal"}},t._l(t.reverseSyncDetails(t.historySyncCard.syncDetails),(function(a,i){return e("div",{key:i,staticClass:"card border-light"},[e("div",{staticClass:"card-body"},[e("h6",{staticClass:"card-subtitle mb-2 text-muted"},[t._v(t._s(t.formatTime(a.timestamp)))]),e("span",{staticClass:"card-text"},[t._v(t._s(a.content))])])])})),0),e("b-modal",{attrs:{scrollable:"",size:"xl","hide-footer":""},model:{value:t.showPreviewModal,callback:function(e){t.showPreviewModal=e},expression:"showPreviewModal"}},[e("span",[t._v(t._s(t.previewDetail.name))]),e("b-button",{directives:[{name:"show",rawName:"v-show",value:"img"===t.showPreviewCd()&&t.dev.isMaster,expression:"showPreviewCd()==='img' && dev.isMaster"}],staticStyle:{float:"right"},attrs:{size:"sm",variant:"success"},on:{click:t.copyImg}},[t._v("复制图片 ")]),e("div",{staticClass:"d-block text-center show-container",staticStyle:{"text-align":"center"}},[e("b-img",{directives:[{name:"show",rawName:"v-show",value:"img"===t.showPreviewCd(),expression:"showPreviewCd()==='img'"}],staticClass:"show-col",attrs:{id:"preImg",thumbnail:"",fluid:"",src:t.previewDetail.url,alt:t.previewDetail.ext}}),e("video",{directives:[{name:"show",rawName:"v-show",value:"video"===t.showPreviewCd(),expression:"showPreviewCd()==='video'"}],staticClass:"show-col",attrs:{controls:"",autoplay:"",src:t.previewDetail.url}}),e("a",{directives:[{name:"show",rawName:"v-show",value:"other"===t.showPreviewCd()&&!t.dev.isMaster,expression:"showPreviewCd()==='other' && !dev.isMaster"}],attrs:{href:t.previewDetail.url,download:""}},[t._v("文件类型不支持预览，点击下载")]),e("a",{directives:[{name:"show",rawName:"v-show",value:"other"===t.showPreviewCd()&&t.dev.isMaster,expression:"showPreviewCd()==='other' && dev.isMaster"}],attrs:{href:"javascript:void(0)"},on:{click:function(e){t.clickDownloadEvent(t.genUrl("/"+t.syncDetail.fileHash))}}},[t._v(" 文件类型不支持预览，点击下载 ")])],1),void 0],2),e("b-modal",{attrs:{title:"屏幕截图",scrollable:"",size:"xl","hide-footer":""},model:{value:t.showCaptureModal,callback:function(e){t.showCaptureModal=e},expression:"showCaptureModal"}},[e("div",{staticClass:"d-block text-center show-container",staticStyle:{"text-align":"center"}},[e("b-button",{directives:[{name:"show",rawName:"v-show",value:t.choiceDev,expression:"choiceDev"}],staticClass:"mt-3",attrs:{variant:"info"},on:{click:t.shareEventCapture}},[t._v(" 分享至-"+t._s(t.choiceDevShow)+" ")]),e("b-img",{staticClass:"show-col",attrs:{thumbnail:"",fluid:"",src:t.captureTag,alt:"capture Image"}})],1)]),e("b-modal",{attrs:{title:"直链调用",scrollable:"",size:"xl","hide-footer":""},model:{value:t.openUrlModal,callback:function(e){t.openUrlModal=e},expression:"openUrlModal"}},[e("div",{staticClass:"d-block text-center show-container",staticStyle:{"text-align":"center"}},[e("b-button",{staticClass:"mt-3",attrs:{variant:"info"},on:{click:t.openUrlEvent}},[t._v(" 发起调用 ")]),e("hr"),e("h5",[t._v("请求参数")]),e("b-textarea",{attrs:{"max-rows":"20"},model:{value:t.openUrlParams,callback:function(e){t.openUrlParams=e},expression:"openUrlParams"}})],1)])],1)],1)},y=[],x=function(){var t=this,e=t._self._c;return e("div",{ref:t.id,staticStyle:{width:"100%",height:"100%","text-align":"center",display:"block"},attrs:{id:t.id}})},S=[],C=a(4049),_=a.n(C),k={name:"QrCodeComponent",data(){return{qrcode:""}},props:{id:{type:String,required:!0},text:{type:String,default:""},width:{type:String,default:"128"},height:{type:String,default:"128"},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#ffffff"}},watch:{text(){this.createQrcode()}},mounted(){this.createQrcode()},methods:{createQrcode(){this.qrcode&&(this.$refs[this.id].innerHTML=""),this.qrcode=new(_())(this.$refs[this.id],{text:this.text,width:this.width,height:this.height,colorDark:this.colorDark,colorLight:this.colorLight,correctLevel:_().CorrectLevel.H})}}},T=k,D=(0,d.Z)(T,x,S,!1,null,null,null),M=D.exports,I=a(8519),P=a.n(I),O={name:"HomeComponent",components:{QrCodeComponent:M},data(){return{settingUrl:`http://${window.location.hostname}:8081/x/setting`,listenPort:8081,shareUrl:"",token:"",dev:{},devs:[],choiceDev:null,choiceDevShow:null,syncText:"",uploadOptions:{target:`${window.location.origin}/x/upload`,testChunks:!1,chunkSize:1074790400},uploadAttrs:{accept:"image/*"},ws:null,wsGroupId:1,wsMsgType:{ping:"ping",pingGroup:"pingGroup",sync:"sync",anySetting:"anySetting",capture:"capture",openUrl:"openUrl"},showPreviewModal:!1,previewDetail:{url:null,ext:"",name:""},transInfo:{},enableTranslate:!1,showCaptureModal:!1,showHistoryTextModal:!1,historySyncCard:{},capturePath:null,captureTag:"",openUrlModal:!1,openUrlParams:"",isMobile:navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}},mounted(){this.pingDevice(),setInterval((()=>{this.ws&&this.ws.send(JSON.stringify({msgEvent:this.wsMsgType.ping}))}),6e4),setInterval((()=>{this.pingDevice()}),6e4)},watch:{syncText(){this.syncText&&this.choiceDev&&this.ws.send(JSON.stringify({msgEvent:this.wsMsgType.sync,content:{syncType:"text",content:this.syncText,toDevId:this.choiceDev}}))}},methods:{reverseSyncDetails(t){return t?[...t].reverse():t},showHistoryTextModalEvent(t){console.log(t),this.historySyncCard=t,this.showHistoryTextModal=!0},copyText(t){let e=new(P())("#"+t);e.on("success",(()=>{this.$bvToast.toast("复制成功",{title:"提示",variant:"info",solid:!0,autoHideDelay:2e3}),e.destroy()})),e.on("error",(t=>{console.log(t),alert("该浏览器不支持自动复制!"),e.destroy()}))},copyImg(){let t=document.getElementById("preImg");console.log(t.src);let e=new XMLHttpRequest;e.open("GET",t.src),e.responseType="blob",e.onload=()=>{if(4===e.readyState&&200===e.status){console.log(e.response);let t=e.response;if("image/png"===t.type){let e=new ClipboardItem({[t.type]:t});navigator.clipboard.write([e]).then((()=>{this.$bvToast.toast("复制成功",{title:"提示",variant:"info",solid:!0,autoHideDelay:2e3})})).catch((t=>{alert(t)}))}else createImageBitmap(e.response).then((t=>{console.log(t.height,t.width);let e=document.createElement("canvas");e.width=t.width,e.height=t.height;let a=e.getContext("2d");a.drawImage(t,0,0),e.toBlob((t=>{const e=[new ClipboardItem({["image/png"]:t})];navigator.clipboard.write(e).then((()=>{this.$bvToast.toast("复制成功",{title:"提示",variant:"info",solid:!0,autoHideDelay:2e3})}),(function(t){alert(t)}))}))}))}},e.send()},clickDownloadEvent(t){this.$http.post(this.genUrl("/download/master"),{url:t}).then((t=>{console.log(t)}))},clearSyncCache(){this.$http.post(this.genUrl("/setting"),{mode:"clearSync",groupId:this.wsGroupId}).then((t=>{console.log(t),this.$bvToast.toast("所有设备同步数据已清除",{title:"提示",variant:"info",solid:!0,autoHideDelay:3e3})}))},openUrlEvent(){window.open(this.openUrlParams)},shareEventCapture(){this.showCaptureModal=!1,this.ws.send(JSON.stringify({msgEvent:this.wsMsgType.sync,content:{syncType:"file",fileHash:this.capturePath,toDevId:this.choiceDev}}))},clickTranslate(){let t=window.getSelection().toString();this.enableTranslate&&t&&(this.transInfo={},this.$http.post(this.genUrl("/translate"),{text:t}).then((t=>{console.log(t.data),this.transInfo=t.data.result?t.data.result:{}})))},showPreviewCd(){return-1!==[".jpg",".png",".jpeg",".webp"].indexOf(this.previewDetail.ext.toLowerCase())?"img":-1!==[".mp4",".av",".mov"].indexOf(this.previewDetail.ext.toLowerCase())?"video":"other"},clickPreview(t,e,a){this.showPreviewModal=!0,this.previewDetail.ext=e,this.previewDetail.url=this.genUrl("/"+t),this.previewDetail.name=a},onFileUploadSuccess(t,e,a){console.log("upload success",a),this.ws.send(JSON.stringify({msgEvent:this.wsMsgType.sync,content:{syncType:"file",fileHash:a,toDevId:this.choiceDev}}))},formatTime(t){let e=new Date(t);return e.toTimeString().replace("(中国标准时间)","")},clickChoiceDev:function(t){this.choiceDev=t.devId,this.choiceDevShow=t.show,console.log("choece dev",t.devId)},genDevIcon(t){switch(t){case"phone":return"phone";case"pc":return"laptop"}},genUrl:function(t){return`${window.location.origin}/x`+t},getLocalInfo:function(){console.log("window listen port:",window.listenPort),this.$http.get(this.genUrl("/localInfo")).then((t=>{console.log(t.data),this.shareUrl=t.data.shareUrl}))},pingDevice:function(){console.log("masterId",this.$route.query.masterId),this.$http.get(this.genUrl("/ping"),{params:{masterId:this.$route.query.masterId}}).then((t=>{console.log(t),-1!==t.data.code?(this.shareUrl=t.data.serInfo.shareUrl,this.ws||this.initWsEvent()):window.location.href="/index.html#/login"}))},initWsEvent:function(){this.ws=new WebSocket(`ws://${window.location.hostname}:${this.listenPort}/x/ws/sync/${this.wsGroupId}`),this.ws.onopen=()=>{console.log("ws连接状态："+this.ws.readyState),this.ws.send(JSON.stringify({msgEvent:this.wsMsgType.pingGroup}))},this.ws.onmessage=t=>{console.log("接收到来自服务器的消息：",Date.now(),t.data);let e=JSON.parse(t.data);switch(e.msgEvent){case this.wsMsgType.ping:this.ws.send(JSON.stringify({msgEvent:this.wsMsgType.ping}));break;case this.wsMsgType.sync:this.devs=e.devs.devs,this.dev=e.devs.dev,this.token=e.token;break;case this.wsMsgType.anySetting:e.cfg.baiduCfg&&(this.enableTranslate=e.cfg.baiduCfg.enableBaiduTrans);break;case this.wsMsgType.capture:this.capturePath=e.fileHash,this.captureTag=`/${this.capturePath}?t=${Date.now()}`,this.showCaptureModal=!0;break;case this.wsMsgType.openUrl:this.openUrlParams=e.url,e.autoOpen?window.open(this.openUrlParams):this.openUrlModal=!0;break}},this.ws.onerror=t=>{console.log("ws err",t),this.ws=null},this.ws.onclose=()=>{console.log("ws close"),this.ws=null}}}},U=O,H=(0,d.Z)(U,m,y,!1,null,"2d951031",null),A=H.exports,$={name:"indexPage",components:{HomeComponent:A}},z=$,E=(0,d.Z)(z,g,w,!1,null,null,null),N=E.exports,B=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("b-card",{attrs:{"no-body":""}},[e("b-tabs",{attrs:{"content-class":"mt-3",vertical:"",card:"",pills:"",justified:"","active-nav-item-class":"font-weight-bold text-uppercase text-warning bg-info","active-tab-class":"font-weight-bold"}},[e("b-tab",{attrs:{title:"文本自动翻译",active:""}},[e("b-card-text",[e("b-alert",{staticStyle:{"text-align":"left"},attrs:{variant:"warning",show:""}},[t._v(" 注意：百度翻译API初次申请会有免费500W文字的翻译额度，申请链接:"),e("span",{staticClass:"user-select-all"},[t._v("https://fanyi-api.baidu.com")])]),e("b-form-group",{attrs:{"label-align":"left","label-cols":"3","label-cols-lg":"3",label:"API Key","label-for":"input-default"}},[e("b-form-input",{attrs:{"aria-label":"Small text input with custom switch"},model:{value:t.baiduAppid,callback:function(e){t.baiduAppid=e},expression:"baiduAppid"}})],1),e("b-form-group",{attrs:{"label-align":"left","label-cols":"3","label-cols-lg":"3",label:"Secret Key","label-for":"input-default"}},[e("b-form-input",{attrs:{"aria-label":"Small text input with custom switch"},model:{value:t.baiduSecret,callback:function(e){t.baiduSecret=e},expression:"baiduSecret"}})],1),e("b-form-group",{attrs:{"label-align":"left","label-cols":"3","label-cols-lg":"3",label:"启用","label-for":"input-default"}},[e("b-form-checkbox",{staticClass:"mr-n2 mb-n1",staticStyle:{float:"left","margin-top":"5px"},attrs:{switch:""},on:{change:t.clickBaiduTrans},model:{value:t.enableBaiduTrans,callback:function(e){t.enableBaiduTrans=e},expression:"enableBaiduTrans"}})],1),e("b-input-group",[e("b-button",{attrs:{size:"sm",variant:"outline-info",fill:""},on:{click:function(e){return t.saveSetting(t.modes.baiduCfg)}}},[t._v("保存 ")])],1)],1)],1),e("b-tab",{attrs:{title:"截屏配置"}},[e("b-card-text",[e("b-form-group",{attrs:{"label-align":"left","label-cols":"2","label-cols-lg":"3",label:"启用","label-for":"input-default"}},[e("b-form-checkbox",{staticClass:"mr-n2 mb-n1",staticStyle:{float:"left","margin-top":"5px"},attrs:{switch:""},on:{change:t.clickEnableCapture},model:{value:t.enableCapture,callback:function(e){t.enableCapture=e},expression:"enableCapture"}})],1),e("b-form-group",{attrs:{"label-align":"left","label-cols":"2","label-cols-lg":"3",label:"快捷键","label-for":"input-default"}},[e("b-form-radio-group",{staticClass:"mb-3",staticStyle:{float:"left"},model:{value:t.captureKey,callback:function(e){t.captureKey=e},expression:"captureKey"}},[e("b-form-radio",{staticStyle:{"font-weight":"normal","margin-top":"5px"},attrs:{value:t.captureKeysOptions[0].val}},[t._v(" ALT / "),e("b-icon",{attrs:{icon:"option"}}),t._v(" + S ")],1),e("b-form-radio",{staticStyle:{"font-weight":"normal","margin-top":"5px"},attrs:{value:t.captureKeysOptions[1].val}},[t._v(" CTRL / "),e("b-icon",{attrs:{icon:"command"}}),t._v(" + SHIFT + S ")],1)],1)],1),e("b-input-group",[e("b-button",{attrs:{size:"sm",variant:"outline-info",fill:""},on:{click:function(e){return t.saveSetting(t.modes.captureCfg)}}},[t._v(" 保存 ")])],1)],1)],1),e("b-tab",{attrs:{title:"其他设置"}},[e("b-card-text",[e("b-form-group",{attrs:{"label-align":"left","label-cols":"4","label-cols-lg":"5",label:"自动打开文件夹","label-for":"input-default"}},[e("b-form-checkbox",{staticClass:"mr-n2 mb-n1",staticStyle:{float:"left","margin-top":"5px"},attrs:{switch:""},on:{change:t.clickEnableAutoOpenFolder},model:{value:t.enableAutoOpenFolder,callback:function(e){t.enableAutoOpenFolder=e},expression:"enableAutoOpenFolder"}},[e("b-icon",{attrs:{id:"tooltip-cfg-1",variant:"info",icon:"question-circle"}}),e("b-tooltip",{attrs:{target:"tooltip-cfg-1",triggers:"hover"}},[t._v(" 当下载完成后自动打开下载文件夹 ")])],1)],1),e("b-form-group",{attrs:{"label-align":"left","label-cols":"4","label-cols-lg":"5",label:"最大文本记录数量","label-for":"input-default"}},[e("b-form-select",{staticStyle:{width:"80px",float:"left"},attrs:{options:t.textMaxOptions},on:{change:function(e){return t.saveSetting(t.modes.sysCfg)}},model:{value:t.textHistoryMaxSize,callback:function(e){t.textHistoryMaxSize=e},expression:"textHistoryMaxSize"}})],1),e("b-form-group",{attrs:{"label-align":"left","label-cols":"4","label-cols-lg":"5",label:"缓存","label-for":"input-default"}},[e("b-button",{staticClass:"mr-n2 mb-n1",staticStyle:{float:"left"},attrs:{pill:"",size:"sm",variant:"warning"},on:{click:function(e){return t.saveSetting(t.modes.clearSync)}}},[t._v(" 清除缓存数据 ")])],1)],1)],1),e("b-tab",{attrs:{title:"系统信息"}},[e("b-card-text",[e("b-list-group",{staticStyle:{"text-align":"left","font-weight":"bold"},attrs:{flush:""}},[e("b-list-group-item",[t._v("缓存目录："+t._s(t.sysInfo.resource)+" "),e("b-badge",{attrs:{pill:"",variant:"info"}},[t._v("已用"+t._s(t.resourceSize))])],1),e("b-list-group-item",[t._v("监听端口："+t._s(t.sysInfo.listenPort))]),e("b-list-group-item",[t._v("环境："+t._s(t.sysInfo.env))]),e("b-list-group-item",[t._v("项目地址：https://github.com/easyhutu/any-sync-gui")]),e("b-list-group-item",[t._v("Power By： "),e("b-badge",{attrs:{variant:"info"}},[t._v("Vue2")]),t._v("   "),e("b-badge",{attrs:{variant:"info"}},[t._v("Electron")])],1)],1)],1)],1)],1)],1)],1)])},K=[],j={name:"settingPage",data(){return{modes:{clearSync:"clearSync",captureCfg:"captureCfg",baiduCfg:"baiduCfg",sysCfg:"sysCfg"},settingUrl:"http://127.0.0.1:8081/setting",baiduAppid:null,baiduSecret:null,enableBaiduTrans:!1,enableCapture:!1,enableAutoOpenFolder:!1,captureKey:null,sysInfo:{},textHistoryMaxSize:20,resourceSize:0,groupId:1,dftCaptureKey:"Alt + S",captureKeysOptions:[{val:"Alt + S",name:"ALT/⌥ + S"},{val:"CommandOrControl + Shift + S",name:"CTRL/⌘ + SHIFT + S"}],textMaxOptions:[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"50",value:50}]}},mounted(){this.getSetting()},methods:{clickEnableCapture(){this.saveSetting("captureCfg")},clickEnableAutoOpenFolder(){this.saveSetting("electronCfg")},getSetting(){this.$http.get(this.settingUrl).then((t=>{console.log(t.data);let e=t.data.baiduCfg,a=t.data.captureCfg,i=t.data.electronCfg,s=t.data.sysCfg;this.sysInfo=t.data.sysInfo,this.resourceSize=t.data.resourceSize,e&&(this.baiduAppid=e.baiduAppid,this.baiduSecret=e.baiduSecret,this.enableBaiduTrans=e.enableBaiduTrans),a?(this.captureKey=a.captureKey?a.captureKey:this.dftCaptureKey,this.enableCapture=a.enableCapture):this.captureKey=this.dftCaptureKey,i&&(this.enableAutoOpenFolder=i.enableAutoOpenFolder),s&&(this.textHistoryMaxSize=s.textHistoryMaxSize)}))},saveSetting(t){let e={mode:t,groupId:this.groupId,baiduCfg:{baiduAppid:this.baiduAppid,baiduSecret:this.baiduSecret,enableBaiduTrans:this.enableBaiduTrans},captureCfg:{enableCapture:this.enableCapture,captureKey:this.captureKey},electronCfg:{enableAutoOpenFolder:this.enableAutoOpenFolder},sysCfg:{textHistoryMaxSize:this.textHistoryMaxSize}};try{window.ipc.send("saveSetting",e)}catch(a){console.log("ipc send error",a)}this.$http.post(this.settingUrl,e).then((e=>{console.log(e);let a="配置已保存";t===this.modes.captureCfg&&(a="配置已保存，需重启应用生效"),t===this.modes.clearSync&&(a="所有设备同步数据已清除"),this.$bvToast.toast(a,{title:"提示",variant:"info",solid:!0,autoHideDelay:3e3})}))},clickBaiduTrans(){this.baiduAppid&&this.baiduSecret?this.saveSetting(this.modes.baiduCfg):(this.$bvToast.toast("启用翻译必须填写API Key、Secret Key",{title:"警告",variant:"warning",solid:!0,autoHideDelay:3e3}),this.enableBaiduTrans=!1)}},watch:{}},F=j,L=(0,d.Z)(F,B,K,!1,null,null,null),q=L.exports,G=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("b-card",{attrs:{"no-body":""}},[e("b-form-input",{attrs:{placeholder:"输入验证令牌",type:"number"},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}}),e("b-button",{attrs:{size:"sm",variant:"info"},on:{click:t.verifyToken}},[t._v("验证")])],1)],1)])},Z=[],J={name:"loginPage",data(){return{token:""}},mounted(){},methods:{verifyToken(){null===this.token|6!==this.token.length?this.$bvToast.toast("请输入6位数字令牌",{title:"提示",variant:"warning",solid:!0,autoHideDelay:3e3}):this.$http.post("/verify/token",{token:this.token}).then((t=>{console.log(t),0===t.data.code?window.location.href=`/?token=${this.token}`:this.$bvToast.toast("验证失败",{title:"提示",variant:"warning",solid:!0,autoHideDelay:3e3})}))}},watch:{}},Q=J,W=(0,d.Z)(Q,G,Z,!1,null,null,null),R=W.exports;const X=[{path:"/",component:N},{path:"/setting",component:q},{path:"/login",component:R}],V=new f.ZP({routes:X});var Y=V;i["default"].use(h.ZP),i["default"].use(b()),i["default"].use(f.ZP),i["default"].config.productionTip=!1,new i["default"]({render:t=>t(p),router:Y}).$mount("#app")},6608:function(){}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,i,s,o){if(!i){var n=1/0;for(d=0;d<t.length;d++){i=t[d][0],s=t[d][1],o=t[d][2];for(var r=!0,l=0;l<i.length;l++)(!1&o||n>=o)&&Object.keys(a.O).every((function(t){return a.O[t](i[l])}))?i.splice(l--,1):(r=!1,o<n&&(n=o));if(r){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[i,s,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,o,n=i[0],r=i[1],l=i[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var d=l(a)}for(e&&e(i);c<n.length;c++)o=n[c],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},i=self["webpackChunkany_sync"]=self["webpackChunkany_sync"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(9283)}));i=a.O(i)})();
//# sourceMappingURL=app.4a4d553c.js.map